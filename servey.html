<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œçš„ç†æƒ³èˆ‡ç¾å¯¦</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://randytsay.github.io/interview-tool/">
    <meta property="og:title" content="å·¥ä½œçš„ç†æƒ³èˆ‡ç¾å¯¦ - ç™¾æ¥­è¨ªè«‡å•å·">
    <meta property="og:description" content="æ¢ç´¢ç†æƒ³å·¥ä½œèˆ‡ç¾å¯¦å·®è·ï¼">
    <meta property="og:image" content="https://randytsay.github.io/interview-tool/images/survey-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://randytsay.github.io/interview-tool/">
    <meta property="twitter:title" content="å·¥ä½œçš„ç†æƒ³èˆ‡ç¾å¯¦-è¨ªè«‡å•å·">
    <meta property="twitter:description" content="æ¢ç´¢ç†æƒ³å·¥ä½œèˆ‡ç¾å¯¦å·®è·ï¼">
    <meta property="twitter:image" content="https://randytsay.github.io/interview-tool/images/survey-preview.jpg">

    <!-- LINE ç‰¹åˆ¥æ”¯æ´ -->
    <meta property="og:site_name" content="è¨ªè«‡è¡¨">
    <meta name="description" content="æ¢ç´¢ç†æƒ³å·¥ä½œèˆ‡ç¾å¯¦å·®è·ï¼">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .card-header {
            background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%);
            color: white;
            padding: 24px;
            text-align: center;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .card-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .card-content {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover:not(:disabled) {
            background: #4338ca;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        .btn-outline {
            background: white;
            color: #4f46e5;
            border: 2px solid #4f46e5;
        }

        .btn-outline:hover:not(:disabled) {
            background: #4f46e5;
            color: white;
        }

        .btn-green {
            background: #059669;
        }

        .btn-green:hover:not(:disabled) {
            background: #047857;
        }

        .progress-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 24px;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #d1d5db;
            transition: background 0.3s;
        }

        .progress-dot.active {
            background: #4f46e5;
        }

        .progress-line {
            width: 32px;
            height: 4px;
            background: #d1d5db;
            transition: background 0.3s;
        }

        .progress-line.active {
            background: #4f46e5;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .ranking-item:hover {
            border-color: #4f46e5;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.1);
        }

        .ranking-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ranking-number {
            width: 36px;
            height: 36px;
            background: #4f46e5;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .ranking-icon {
            font-size: 24px;
        }

        .ranking-label {
            font-weight: 600;
            color: #374151;
			font-size: 22px;
        }

        .ranking-controls {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .arrow-btn {
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: color 0.3s;
        }

        .arrow-btn:hover:not(:disabled) {
            color: #4f46e5;
        }

        .arrow-btn:disabled {
            color: #d1d5db;
            cursor: not-allowed;
        }

        .rating-item {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            background: #f9fafb;
            margin-bottom: 16px;
        }

        .rating-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .rating-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #374151;
			font-size: 22px;
        }

        .rating-value {
            font-size: 20px;
            font-weight: bold;
            color: #4f46e5;
        }

        .slider-container {
            padding: 0 8px;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #6b7280;
            margin-top: 8px;
        }

        .results-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .results-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 12px;
            text-align: center;
        }

        /* Result item styles */
        .result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s;
            border-left: 4px solid transparent; /* Default border */
        }

        /* Style for integrated rating display */
        .result-item .rating-display {
            margin-left: auto;
            font-weight: bold;
            font-size: 28px;
            color: #4f46e5;
            flex-shrink: 0;
        }
        .result-item .rating-display span {
            color: #6b7280;
            font-size: 14px;
            font-weight: normal;
        }

        /* Highlight style for high importance, low satisfaction */
        /* Applied when index <= 1 (Top 2 ideal importance) AND rating <= 2 (Low satisfaction) */
        .result-item.highlight-gap {
            background: #fef3c7; /* Light yellow background */
            border-left-color: #f59e0b; /* Orange border */
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2); /* Add a subtle shadow */
        }


        /* Suggestion box style */
        .suggestion-box {
             margin-top: 20px;
             padding: 16px;
             background: #e0f2fe; /* Light blue background */
             border-radius: 12px;
             border: 2px solid #0ea5e9; /* Blue border */
             text-align: left; /* Adjusted to left align text */
        }

        .suggestion-box .suggestion-title {
             font-weight: bold;
             color: #0369a1; /* Darker blue title */
             margin-bottom: 8px;
             text-align: center; /* Keep title centered */
        }

        .suggestion-box .suggestion-text {
             color: #075985; /* Text color */
             font-size: 15px;
             line-height: 1.5;
             margin-bottom: 12px; /* Add more margin below each paragraph */
        }
        .suggestion-box .suggestion-text:last-child {
             margin-bottom: 0; /* No margin for the last paragraph */
        }


        .btn-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 12px;
        }

        .info-text {
            text-align: center;
            font-size: 12px;
            color: #6b7280;
            margin-top: 16px;
        }

        .highlight {
            color: #fbbf24;
            font-weight: 900;
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .hidden {
            display: none;
        }

		.highlight-name {
			color: #fbbf24;
			font-weight: 900;
			font-size: 1.3em;
			text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
		}


/* æ‰‹æ©Ÿç‰ˆå®Œæ•´å„ªåŒ– */
@media (max-width: 768px) {

    #page-results .progress-bar {
        display: none;
    }

    /* ç¸®å°æ¨™é¡Œå€åŸŸ */
    #page-results .card-header {
        padding: 16px;
    }

    #page-results .card-title {
        font-size: 1.3rem;
    }

    /* ç¸®å°å…§å®¹å€åŸŸé–“è· */
    #page-results .card-content {
        padding: 16px;
    }

    .results-section {
        padding: 12px;
        margin-bottom: 10px;
    }

    .results-title {
        font-size: 22px;
        margin-bottom: 8px;
    }

    /* ç·Šæ¹Šçš„çµæœé …ç›® */
    .result-item {
        padding: 6px 8px;
        margin-bottom: 4px;
        font-size: 13px;
        gap: 8px; /* Reduce gap */
    }

    .ranking-number {
        width: 24px;
        height: 24px;
        font-size: 11px;
    }

    .ranking-icon {
        font-size: 16px;
    }

    .ranking-label {
        font-size: 16px; /* Adjust label size */
    }

    .result-item .rating-display {
        font-size: 22px; /* Adjust rating size */
    }
     .result-item .rating-display span {
         font-size: 12px; /* Adjust "/5" size */
     }

     /* Adjust suggestion box for mobile */
    .suggestion-box {
        padding: 12px;
        margin-top: 16px;
    }
    .suggestion-box .suggestion-title {
        font-size: 20px;
        margin-bottom: 6px;
    }
    .suggestion-box .suggestion-text {
        font-size: 16px;
        margin-bottom: 8px; /* Adjust margin for mobile */
    }
     .suggestion-box .suggestion-text:last-child {
         margin-bottom: 0;
     }


    /* ç·Šæ¹Šçš„æŒ‰éˆ• */
    .btn-group {
        margin-bottom: 8px;
        gap: 6px;
    }

    .btn {
        padding: 8px 12px;
        font-size: 13px;
    }

    /* åº•éƒ¨è³‡è¨Šæ–‡å­—ç¸®å° */
    .info-text {
        font-size: 14px;
        margin-top: 8px;
    }
    .highlight-name {
        font-size: 1.2em;
    }
}


    </style>
</head>
<body>
    <div class="container">
        <!-- ç¬¬ä¸€é ï¼šåŸºæœ¬è³‡æ–™ -->
        <div id="page-0" class="card">
            <div class="card-header">
                <div class="card-title">æ¢ç´¢ç†æƒ³å·¥ä½œèˆ‡ç¾å¯¦è¨ªè«‡</div>
            </div>
            <div class="card-content">
                <div class="form-group">
                    <label class="form-label">è¨ªè«‡å°è±¡å§“å</label>
                    <input type="text" id="interviewee-name" class="form-input" placeholder="è«‹è¼¸å…¥å§“å">
                </div>
                <div class="form-group">
                    <label class="form-label">è¨ªè«‡æ—¥æœŸ</label>
                    <input type="date" id="interview-date" class="form-input">
                </div>
                <button id="start-btn" class="btn" disabled>
                    é–‹å§‹è©•ä¼° â†’
                </button>
            </div>
        </div>

        <!-- ç¬¬äºŒé ï¼šæ’åº -->
        <div id="page-1" class="card hidden">
            <div class="progress-bar">
                <div class="progress-dot active"></div>
                <div class="progress-line active"></div>
                <div class="progress-dot active"></div>
                <div class="progress-line"></div>
                <div class="progress-dot"></div>
                <div class="progress-line"></div>
                <div class="progress-dot"></div>
            </div>
            <div class="card-header">
                <div class="card-title">ğŸ’­ <span class="highlight">ç†æƒ³</span>å·¥ä½œé‡è¦æ€§æ’åº</div>
                <div class="card-subtitle">è«‹ç”¨ä¸Šä¸‹ç®­é ­èª¿æ•´é †åº (ä¸Šæ–¹æœ€é‡è¦ â†’ ä¸‹æ–¹æœ€ä¸é‡è¦)</div>
            </div>
            <div class="card-content">
                <div id="ranking-list"></div>
                <div class="info-text">ğŸ’¡ æç¤ºï¼šé»æ“Šä¸Šä¸‹ç®­é ­å¯èª¿æ•´é †åº</div>
                <button id="next-to-rating" class="btn" style="margin-top: 20px;">
                    ä¸‹ä¸€é¡Œ â†’
                </button>
            </div>
        </div>

        <!-- ç¬¬ä¸‰é ï¼šè©•åˆ† -->
        <div id="page-2" class="card hidden">
            <div class="progress-bar">
                <div class="progress-dot active"></div>
                <div class="progress-line active"></div>
                <div class="progress-dot active"></div>
                <div class="progress-line active"></div>
                <div class="progress-dot active"></div>
                <div class="progress-line"></div>
                <div class="progress-dot"></div>
            </div>
            <div class="card-header">
                <div class="card-title">ğŸ“Š <span class="highlight">ç›®å‰</span>å·¥ä½œæ»¿æ„åº¦è©•åˆ†</div>
                <div class="card-subtitle">è«‹ç‚ºç›®å‰å·¥ä½œè©•åˆ† (1å¾ˆä¸æ»¿æ„ â†’ 5å¾ˆæ»¿æ„)</div>
            </div>
            <div class="card-content">
                <div id="rating-list"></div>
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button id="back-to-ranking" class="btn btn-outline" style="flex: 1;">
                        â† ä¸Šä¸€é¡Œ
                    </button>
                    <button id="show-results" class="btn" style="flex: 1;">
                        æŸ¥çœ‹çµæœ â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- ç¬¬å››é ï¼šçµæœ -->
        <div id="page-results" class="card hidden">
            <div class="progress-bar">
                <div class="progress-dot active"></div>
                <div class="progress-line active"></div>
                <div class="progress-dot active"></div>
                <div class="progress-line active"></div>
                <div class="progress-dot active"></div>
                <div class="progress-line active"></div>
                <div class="progress-dot active"></div>
            </div>
            <div class="card-header">
                <div class="card-title" id="results-title">åˆ†æçµæœ</div>
                <div class="card-subtitle" id="results-date"></div>
            </div>
            <div class="card-content">
                <!-- Removed the redundant ideal ranking summary -->

                <!-- æ•´åˆé¡¯ç¤ºï¼šç†æƒ³é‡è¦æ€§æ’åºä¸‹çš„ç›®å‰æ»¿æ„åº¦ -->
                <div class="results-section">
                    <div class="results-title">
                        ğŸ’­ç†æƒ³(å·¦) èˆ‡ ğŸ“Šç¾å¯¦(å³) æ¯”è¼ƒ
                    </div>
                    <div id="integrated-results">
                        <!-- é€™è£¡å°‡ç”± JavaScript å¡«å……æ•´åˆå¾Œçš„çµæœ -->
                    </div>
                    <!-- å»ºè­°é¡¯ç¤ºå€åŸŸ -->
                    <div id="suggestion-area">
                         <!-- é€™è£¡å°‡ç”± JavaScript å¡«å……å»ºè­° -->
                    </div>

                </div>

                <!-- Removed download/screenshot buttons -->

                <button id="reset-survey" class="btn btn-outline">
                    ğŸ”„ é–‹å§‹æ–°çš„è¨ªè«‡
                </button>
                <!-- Removed screenshot hint -->
                <!--
                 <div class="info-text" style="margin-top: 12px;">
                    è«‹ç›´æ¥æˆªåœ–å„²å­˜çµæœã€‚
                 </div>
                -->
            </div>
        </div>

        <div class="info-text" id="current-info"></div>
    </div>

    <script>
        // è³‡æ–™çµæ§‹ (å·²èª¿æ•´é †åºï¼Œåˆç†å ±é…¬æ”¾ç¬¬ä¸€å€‹)
        const categories = [
            { id: 'salary', label: 'åˆç†å ±é…¬', icon: 'ğŸ’°' },
            { id: 'growth', label: 'å€‹äººæˆé•·', icon: 'ğŸ“ˆ' },
            { id: 'value', label: 'å·¥ä½œåƒ¹å€¼', icon: 'ğŸ’' },
            { id: 'prospect', label: 'ç”¢æ¥­å‰æ™¯', icon: 'ğŸ”®' },
            { id: 'promotion', label: 'æ™‰å‡æ©Ÿæœƒ', icon: 'ğŸš€' }
        ];

        let currentPage = 0;
        let intervieweeInfo = { name: '', date: '' };
        let rankings = [...categories]; // ç†æƒ³é‡è¦æ€§çš„æ’åºï¼Œåˆå§‹ç‚º categories çš„è¤‡è£½
		let ratings = { // ç›®å‰å·¥ä½œæ»¿æ„åº¦è©•åˆ†ï¼Œç‰©ä»¶å½¢å¼æ–¹ä¾¿æŒ‰ ID æŸ¥è©¢
			salary: 3,
            growth: 3,
			value: 3,
			prospect: 3,
			promotion: 3
		};

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è¨­å®šé è¨­æ—¥æœŸ
            document.getElementById('interview-date').value = new Date().toISOString().split('T')[0];

            // ç¶å®šäº‹ä»¶
            bindEvents();
            updateCurrentInfo();
            renderRankingList(); // æ¸²æŸ“æ’åºåˆ—è¡¨ï¼ˆåœ¨æ’åºé é¢é¡¯ç¤ºï¼‰
            renderRatingList(); // æ¸²æŸ“è©•åˆ†åˆ—è¡¨ï¼ˆåœ¨è©•åˆ†é é¢é¡¯ç¤ºï¼‰

            // åˆå§‹åŒ–æ»‘æ¡¿æ¨£å¼ (ç¡®ä¿åœ¨å…ƒç´ æ¸²æŸ“åæ‰§è¡Œ)
            initializeSliderStyles();
        });

        function bindEvents() {
            // åŸºæœ¬è³‡æ–™é é¢
            document.getElementById('interviewee-name').addEventListener('input', validateBasicInfo);
            document.getElementById('interview-date').addEventListener('change', validateBasicInfo);
            document.getElementById('start-btn').addEventListener('click', startSurvey);

            // å°èˆªæŒ‰éˆ•
            document.getElementById('next-to-rating').addEventListener('click', () => showPage(2));
            document.getElementById('back-to-ranking').addEventListener('click', () => showPage(1));
            document.getElementById('show-results').addEventListener('click', showResults);

            // çµæœé é¢æŒ‰éˆ•
            document.getElementById('reset-survey').addEventListener('click', resetSurvey);

            // ç§»é™¤ä¸‹è¼‰å’Œæˆªåœ–æŒ‰éˆ•äº‹ä»¶ï¼Œå› ç‚ºä¸å†ä½¿ç”¨
        }

        function validateBasicInfo() {
            const name = document.getElementById('interviewee-name').value.trim();
            const date = document.getElementById('interview-date').value;
            const startBtn = document.getElementById('start-btn');

            if (name && date) {
                startBtn.disabled = false;
                intervieweeInfo = { name, date };
            } else {
                startBtn.disabled = true;
            }
        }

        function startSurvey() {
            showPage(1);
        }

        function showPage(pageNum) {
            // éš±è—æ‰€æœ‰é é¢
            for (let i = 0; i <= 2; i++) { // é é¢ç·¨è™Ÿ 0, 1, 2
                const page = document.getElementById(`page-${i}`);
                if (page) page.classList.add('hidden');
            }
            // çµæœé é¢å–®ç¨è™•ç†ï¼Œå› ç‚º ID ä¸åŒ
            document.getElementById('page-results').classList.add('hidden');


            // é¡¯ç¤ºç›®æ¨™é é¢
            if (pageNum === 99) { // ç”¨ 99 ä»£è¡¨çµæœé 
                document.getElementById('page-results').classList.remove('hidden');
            } else {
                document.getElementById(`page-${pageNum}`).classList.remove('hidden');
            }

            currentPage = pageNum;
            updateCurrentInfo();

            // æ›´æ–°é€²åº¦æ¢
            updateProgressBar(pageNum);
        }

        function updateProgressBar(pageNum) {
             const dots = document.querySelectorAll('.progress-dot');
             const lines = document.querySelectorAll('.progress-line');

             // é€²åº¦æ¢å°æ‡‰é—œä¿‚ï¼š Page 0 -> Dot 1, Page 1 -> Dot 2, Page 2 -> Dot 3, Page Results -> Dot 4
             // é€£ç·šæ˜¯ä»‹æ–¼é»ä¹‹é–“
             const activeDotIndex = (pageNum === 99) ? 3 : pageNum; // çµæœé å°æ‡‰ç¬¬å››å€‹é» (ç´¢å¼• 3)

             dots.forEach((dot, index) => {
                 if (index <= activeDotIndex) {
                     dot.classList.add('active');
                 } else {
                     dot.classList.remove('active');
                 }
             });

             lines.forEach((line, index) => {
                 // é€£ç·šåœ¨å…©å€‹ active é»ä¹‹é–“æ™‚ active
                 // æ³¨æ„ï¼šlines çš„ç´¢å¼•æ¯” dots å°‘ä¸€å€‹ï¼Œlines[0] åœ¨ dots[0] å’Œ dots[1] ä¹‹é–“
                 if (index < activeDotIndex) {
                      line.classList.add('active');
                 } else {
                      line.classList.remove('active');
                 }
             });
        }


        function renderRankingList() {
            const container = document.getElementById('ranking-list');
            container.innerHTML = '';

            rankings.forEach((category, index) => {
                const item = document.createElement('div');
                item.className = 'ranking-item';
                item.innerHTML = `
                    <div class="ranking-left">
                        <div class="ranking-number">${index + 1}</div>
                        <span class="ranking-icon">${category.icon}</span>
                        <span class="ranking-label">${category.label}</span>
                    </div>
                    <div class="ranking-controls">
                        <button class="arrow-btn" onclick="moveItem(${index}, 'up')" ${index === 0 ? 'disabled' : ''}>
                            â–²
                        </button>
                        <button class="arrow-btn" onclick="moveItem(${index}, 'down')" ${index === rankings.length - 1 ? 'disabled' : ''}>
                            â–¼
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function moveItem(index, direction) {
            const newRankings = [...rankings];
            const targetIndex = direction === 'up' ? index - 1 : index + 1;

            if (targetIndex >= 0 && targetIndex < newRankings.length) {
                [newRankings[index], newRankings[targetIndex]] = [newRankings[targetIndex], newRankings[index]];
                rankings = newRankings;
                renderRankingList();
            }
        }

        function renderRatingList() {
            const container = document.getElementById('rating-list');
            container.innerHTML = '';

            // Render based on the *initial* categories order for consistency on this page
            categories.forEach(category => {
                const item = document.createElement('div');
                item.className = 'rating-item';
				item.innerHTML = `
					<div class="rating-header">
						<span class="rating-label">
							<span class="ranking-icon">${category.icon}</span>
							${category.label}
						</span>
						<span class="rating-value" id="rating-${category.id}">${ratings[category.id] || 3}/5</span>
					</div>
					<div class="slider-container">
						<input type="range" min="1" max="5" value="${ratings[category.id] || 3}"
							   class="slider" id="slider-${category.id}"
							   oninput="updateRating('${category.id}', this.value)">
						<div class="slider-labels">
							<span>å¾ˆä¸æ»¿æ„</span>
							<span>æ™®é€š</span>
							<span>å¾ˆæ»¿æ„</span>
						</div>
					</div>
				`;
                container.appendChild(item);
            });
            // åˆå§‹åŒ–æ»‘æ¡¿æ¨£å¼ (ç¢ºä¿åœ¨æ»‘æ¡¿å…ƒç´ è¢«æ·»åŠ åˆ° DOM å¾ŒåŸ·è¡Œ)
            initializeSliderStyles();
        }

        function updateRating(categoryId, value) {
            ratings[categoryId] = parseInt(value);
            document.getElementById(`rating-${categoryId}`).textContent = `${value}/5`;

            // æ›´æ–°æ»‘æ¡¿é¡è‰²
            const slider = document.getElementById(`slider-${categoryId}`);
            const percentage = ((value - 1) / 4) * 100;
            slider.style.background = `linear-gradient(to right, #4f46e5 0%, #4f46e5 ${percentage}%, #e5e7eb ${percentage}%, #e5e7eb 100%)`;
        }

        // åˆå§‹åŒ–æ‰€æœ‰æ»‘æ¡¿çš„èƒŒæ™¯é¡è‰²
        function initializeSliderStyles() {
             document.querySelectorAll('.slider').forEach(slider => {
                 const value = slider.value;
                 const percentage = ((value - 1) / 4) * 100;
                 slider.style.background = `linear-gradient(to right, #4f46e5 0%, #4f46e5 ${percentage}%, #e5e7eb ${percentage}%, #e5e7eb 100%)`;
             });
        }


        function showResults() {
            showPage(99); // é¡¯ç¤ºçµæœé 
            renderResults(); // æ¸²æŸ“çµæœå…§å®¹
        }

        function renderResults() {
            // è¨­å®šæ¨™é¡Œ
            document.getElementById('results-title').innerHTML = `<span class="highlight-name">${intervieweeInfo.name}</span> çš„åˆ†æçµæœ`;
            document.getElementById('results-date').textContent = intervieweeInfo.date;

            // æ¸²æŸ“æ•´åˆå¾Œçš„çµæœï¼šç†æƒ³é‡è¦æ€§æ’åºä¸‹çš„ç›®å‰æ»¿æ„åº¦
            const integratedContainer = document.getElementById('integrated-results');
            integratedContainer.innerHTML = '';

            // è¨ˆç®—ç¸½æ»¿æ„åº¦åˆ†æ•¸
            let totalRatingScore = 0;
            for (const categoryId in ratings) {
                totalRatingScore += ratings[categoryId];
            }

            // è¨ˆç®—ç¸½è½å·®åˆ†æ•¸ (ä¿ç•™è¨ˆç®—ï¼Œé›–ç„¶å»ºè­°ä¸»è¦åŸºæ–¼ç†æƒ³ç¬¬ä¸€é …å’Œç¸½æ»¿æ„åº¦)
            let totalGap = 0;
            const idealScoreMap = {};
             // Ideal rank score: 1st = 5, 2nd = 4, ..., 5th = 1
            rankings.forEach((cat, index) => {
                 idealScoreMap[cat.id] = categories.length - index;
            });

             rankings.forEach((cat, index) => {
                const categoryId = cat.id;
                const rating = ratings[categoryId] !== undefined ? ratings[categoryId] : 3;

                const idealRankScore = idealScoreMap[categoryId];
                const currentRatingScore = rating;
                const itemGap = idealRankScore - currentRatingScore;
                totalGap += itemGap;

                // åˆ¤æ–·æ˜¯å¦ç‚ºã€Œé«˜ç†æƒ³æ’å + ä½æ»¿æ„åº¦ã€é …ç›®é€²è¡Œè¦–è¦ºå¼·åŒ–
                // æ¢ä»¶ï¼šç†æƒ³æ’ååœ¨å‰ 2 å (index <= 1) ä¸”æ»¿æ„åº¦ <= 2 åˆ†
                let itemClassName = 'result-item';
                if (index <= 1 && rating <= 2) {
                   itemClassName += ' highlight-gap';
                }

                const item = document.createElement('div');
                item.className = itemClassName;
                item.innerHTML = `
                    <div class="ranking-number">${index + 1}</div>
                    <span class="ranking-icon">${cat.icon}</span>
                    <span class="ranking-label">${cat.label}</span>
                    <div class="rating-display">
                        ${rating}<span>/5</span>
                    </div>
                `;
                integratedContainer.appendChild(item);
            });

            // ç”Ÿæˆä¸¦é¡¯ç¤ºå»ºè­°
            const suggestionArea = document.getElementById('suggestion-area');
            suggestionArea.innerHTML = ''; // Clear previous suggestion

            const suggestionBox = document.createElement('div');
            suggestionBox.className = 'suggestion-box';

            let suggestionContent = '';
            let suggestionTitle = 'âœ¨ åˆ†æå»ºè­° âœ¨';


            // === ç¬¬ä¸€æ®µå»ºè­°ï¼šåŸºæ–¼ç¬¬ä¸€å€‹æœ€çœ‹é‡é …ç›®çš„å¿ƒç†éœ€æ±‚æ­éœ² ===
            const top1Category = rankings[0];
            if (top1Category) {
                 const top1SuggestionMap = {
                     'salary': 'ä½ æ˜¯ä¸€å€‹éå¸¸å‹™å¯¦çš„äººï¼ŒæœŸå¾…èƒ½å¤ è®“ç”Ÿæ´»è®Šå¾—æ›´å¥½ï¼Œç”šè‡³æœ‰æ©Ÿæœƒå¯¦ç¾è‡ªå·±çš„ç›®æ¨™åŠå¤¢æƒ³ã€‚',
                     'growth': 'æ„Ÿå—åˆ°è‡ªå·±ä¸æ–·é€²æ­¥ï¼Œæˆç‚ºä¸€å€‹æ›´å¥½çš„äººï¼Œè®“è‡ªå·±è¶Šä¾†è¶Šè‚¯å®šè‡ªå·±ï¼Œæ˜¯ä½ æ·±åŸ‹å…§å¿ƒçš„ä½¿å‘½ã€‚',
                     'value': 'ä½ å¾ä¾†ä¸åæ–¼ä»˜å‡ºï¼Œå°æ–¼èƒ½å¤ å¹«åŠ©æ›´å¤šäººè§£æ±ºå•é¡Œï¼Œæˆ–å¹«åŠ©é€™å€‹ä¸–ç•Œèƒ½å¤ æ›´å¥½ï¼Œå……æ»¿ç†±æƒ…ã€‚',
                     'prospect': 'å°æ–¼è¶¨å‹¢å’Œä¸–ç•Œè„ˆå‹•ï¼Œä½ ç¸½æ˜¯ç›®å…‰å¦‚ç‚¬ï¼Œæœ‰è‘—ç¨åˆ°çš„æƒ³æ³•å’Œè¦‹è§£ï¼Œä¸€æ—¦èƒ½å¤ æ“æœ‰ä»˜è«¸å¯¦è¡Œçš„è¨ˆç•«å°‡å¦‚è™æ·»ç¿¼ã€‚',
                     'promotion': 'åœ¨ç¾¤é«”å…§æ‰®æ¼”æ°å¦‚å…¶åˆ†çš„è§’è‰²ï¼Œä¸¦ä¸”ç™¼æ®å½±éŸ¿åŠ›ï¼Œå¾—åˆ°åˆ¥äººçš„å°Šé‡èˆ‡èªåŒï¼Œæ˜¯å°å…·æœ‰é ˜è¢–æ°£è³ªçš„ä½ çš„æœ€ä½³æè¿°ã€‚'
                 };
                 // ä½¿ç”¨ div.suggestion-text ä½œç‚ºç¬¬ä¸€æ®µ
                 suggestionContent += `<div class="suggestion-text">${top1SuggestionMap[top1Category.id] || 'æ‚¨å°æ­¤éå¸¸é‡è¦–ã€‚'}</div>`;
            }


            // === ç¬¬äºŒæ®µå»ºè­°ï¼šåŸºæ–¼ç¸½æ»¿æ„åº¦åˆ†æ•¸çš„è©•èª ===
            let overallRatingSuggestion = '';
            if (totalRatingScore >= 5 && totalRatingScore <= 10) {
                 overallRatingSuggestion = 'å·¥ä½œå…¶å¯¦åŒæ™‚ä¹Ÿæ±ºå®šäº†ç”Ÿæ´»æ¨£æ…‹ä»¥åŠæƒ…ç·’åƒ¹å€¼ï¼Œè©¦è‘—ä¸»å‹•å‰µé€ æˆ–å°‹æ±‚æ›´èƒ½å¸¶çµ¦è‡ªå·±æˆå°±æ„Ÿå’Œå¹¸ç¦æ„Ÿçš„æ©Ÿæœƒï¼Œèƒ½å¤ è®“è‡ªå·±çš„æ¯ä¸€æ­¥æ›´ç¯¤å®šè¸å¯¦ã€‚';
            } else if (totalRatingScore >= 11 && totalRatingScore <= 15) {
                 overallRatingSuggestion = 'æ‚¨çš„ç›®å‰å·¥ä½œå·²ç¶“å¥ å®šäº†ä¸€äº›åŸºç¤ï¼Œä½†åŒæ™‚ä¹Ÿå­˜åœ¨é€²ä¸€æ­¥æå‡æ»¿æ„åº¦çš„ç©ºé–“ã€‚è­˜åˆ¥ä¸¦å°ˆæ³¨æ–¼é‚£äº›èƒ½è®“æ‚¨æ„Ÿè¦ºæ›´å¥½çš„é ˜åŸŸï¼Œé€éå­¸ç¿’æˆ–èª¿æ•´ï¼ŒåŠ é€Ÿæ‚¨æœå‘æ›´ç†æƒ³çš„ç‹€æ…‹å‰é€²ã€‚';
            } else if (totalRatingScore >= 16 && totalRatingScore <= 20) {
                 overallRatingSuggestion = 'æ‚¨å·²ç¶“æ‰¾åˆ°äº†ä¸€ä»½åœ¨å¤šæ–¹é¢éƒ½èƒ½å¸¶ä¾†åƒ¹å€¼æ„Ÿçš„å·¥ä½œã€‚åœ¨æ­¤åŸºç¤ä¸Šï¼Œæ€è€ƒå¦‚ä½•å°‡é€™ä»½æˆåŠŸçš„æ¨¡å¼å’Œç†±æƒ…æ“´å±•åˆ°æ›´å¤šé ˜åŸŸï¼Œç„¡è«–æ˜¯æå‡ç¾æœ‰å·¥ä½œçš„å»£åº¦æˆ–æ·±åº¦ï¼Œéƒ½å°‡ç‚ºæ‚¨å¸¶ä¾†æ›´å¤šçš„æˆå°±æ„Ÿå’Œå›å ±ã€‚';
            } else if (totalRatingScore >= 21 && totalRatingScore <= 25) {
                 overallRatingSuggestion = 'ç¥è³€æ‚¨å¯¦ç¾äº†å¦‚æ­¤é«˜çš„å·¥ä½œæ»¿æ„åº¦ï¼Œé€™è­‰æ˜æ‚¨åœ¨è¿½æ±‚ç†æƒ³çš„é“è·¯ä¸Šå–å¾—äº†éå‡¡çš„æˆå°±ï¼æ‚¨ç¾åœ¨å¯ä»¥å°‡é€™ä»½å¯¶è²´çš„ç¶“é©—å’Œç†±æƒ…è½‰åŒ–ç‚ºå¼•é ˜ä»–äººçš„åŠ›é‡ï¼Œåœ¨æ›´å¤šå±¤é¢å‰µé€ å±¬æ–¼æ‚¨çš„ç²¾å½©ç¯‡ç« ã€‚';
            }

             if (overallRatingSuggestion) { // åªæœ‰ç”Ÿæˆäº†ç¸½è©•èªæ‰æ·»åŠ 
                 // ä½¿ç”¨ div.suggestion-text ä½œç‚ºç¬¬äºŒæ®µ
                 suggestionContent += `<div class="suggestion-text">ã€æ‚¨çš„ç›®å‰å·¥ä½œç¸½é«”æ»¿æ„åº¦ï¼š${totalRatingScore}/25ã€‘<br>${overallRatingSuggestion}</div>`;
             }


            if (suggestionContent) { // Only show suggestion box if there is content
                 suggestionBox.innerHTML = `
                      ${suggestionTitle ? `<div class="suggestion-title">${suggestionTitle}</div>` : ''}
                      ${suggestionContent}
                  `;
                 suggestionArea.appendChild(suggestionBox);
            } else {
                // Fallback if somehow no suggestion is generated (shouldn't happen with current logic if rankings[0] exists)
                 suggestionArea.innerHTML = `<div class="suggestion-box"><div class="suggestion-text">è«‹å®Œæˆç†æƒ³å·¥ä½œé‡è¦æ€§æ’åºå’Œç›®å‰å·¥ä½œæ»¿æ„åº¦è©•åˆ†ï¼Œä»¥æŸ¥çœ‹åˆ†æçµæœã€‚</div></div>`;
                 suggestionTitle = '';
            }


        }


        function resetSurvey() {
			if (confirm('ç¢ºå®šè¦é‡æ–°é–‹å§‹å—ï¼Ÿç›®å‰çš„è³‡æ–™å°‡æœƒæ¸…é™¤ã€‚')) {
				currentPage = 0;
				intervieweeInfo = { name: '', date: new Date().toISOString().split('T')[0] };
				rankings = [...categories]; // é‡è¨­æ’åº
				ratings = { // é‡è¨­è©•åˆ† (æ ¹æ“š categories çš„æ–°é †åºåˆå§‹åŒ–)
					salary: 3,
                    growth: 3,
					value: 3,
					prospect: 3,
					promotion: 3
				};

        document.getElementById('interviewee-name').value = '';
        document.getElementById('interview-date').value = new Date().toISOString().split('T')[0]; // é‡è¨­æ—¥æœŸè¼¸å…¥æ¡†
        document.getElementById('start-btn').disabled = true; // ç¦ç”¨é–‹å§‹æŒ‰éˆ•

        renderRankingList(); // é‡æ–°æ¸²æŸ“æ’åºåˆ—è¡¨ (page 1)
        renderRatingList(); // é‡æ–°æ¸²æŸ“è©•åˆ†åˆ—è¡¨ (page 2)
        initializeSliderStyles(); // é‡æ–°åˆå§‹åŒ–æ»‘æ¡¿æ¨£å¼
        updateProgressBar(0); // é‡è¨­é€²åº¦æ¢
        showPage(0); // è¿”å›åˆ°åŸºæœ¬è³‡æ–™é é¢
    }
}

function updateCurrentInfo() {
    const infoElement = document.getElementById('current-info');
    if (intervieweeInfo.name && intervieweeInfo.date) {
        infoElement.textContent = `è¨ªè«‡å°è±¡ï¼š${intervieweeInfo.name} | ${intervieweeInfo.date}`;
    } else {
        infoElement.textContent = '';
    }
}

// åˆå§‹åŒ–æ‰€æœ‰æ»‘æ¡¿çš„èƒŒæ™¯é¡è‰² (é é¢è¼‰å…¥æ™‚åŸ·è¡Œä¸€æ¬¡)
document.addEventListener('DOMContentLoaded', initializeSliderStyles);

      </script>
  </body>
  </html>
